<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Deezel-Web Test Harness</title>
    <style>
      body { font-family: sans-serif; background-color: #f0f0f0; color: #333; }
      h1 { color: #1a1a1a; }
      #status { border: 1px solid #ccc; padding: 10px; background-color: #fff; }
      .log { margin-top: 15px; }
    </style>
  </head>
  <body>
    <h1>Deezel-Web Test Harness</h1>
    <div id="status">
      <p>Loading and running tests...</p>
      <p>Open the browser's developer console (F12) to see detailed test logs and results.</p>
    </div>
    <div class="log">
        <p>The tests will log their output to the developer console. Look for messages indicating success or failure for each test case.</p>
    </div>

    <!-- 
      This script imports the `init` function from the compiled WASM package.
      The `init` function is the default export generated by wasm-pack.
      It handles loading the .wasm file and setting up the necessary JS-Rust bindings.
    -->
    <script type="module">
      // The path '../pkg/test_harness/wasm.js' assumes this HTML file is served
      // from the `examples` directory, and the `pkg` directory is at the root
      // of the `deezel-web` crate.
      import init from '../pkg/test_harness/wasm.js';

      async function run() {
        try {
          // The `init` function returns a promise that resolves when the WASM
          // module is fully loaded and instantiated.
          await init();
          document.getElementById('status').innerHTML = '<p style="color: green;">Test harness loaded successfully. Check console for test results.</p>';
        } catch (e) {
          document.getElementById('status').innerHTML = `<p style="color: red;">Error loading test harness: ${e}</p>`;
          console.error("Error during WASM initialization:", e);
        }
      }

      run();
    </script>
  </body>
</html>